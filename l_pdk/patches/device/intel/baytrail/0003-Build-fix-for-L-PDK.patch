From 5cfefe4ab5d5f790b03c81e917433b207446eaae Mon Sep 17 00:00:00 2001
From: "geoffroy.weisenhorn" <weisenhorn.geoffroy.@intel.com>
Date: Wed, 23 Jul 2014 20:35:06 +0200
Subject: Build fix for L PDK

Change-Id: I8e0dcaef1385a6a25e22ba408b16013292df5a85
Signed-off-by: geoffroy.weisenhorn <weisenhorn.geoffroy.@intel.com>
---
 BoardConfig.mk             |   14 ++++++-------
 baytrail.mk                |   22 ++++++++++----------
 byt_t_ffrd8/BoardConfig.mk |   21 +++++++++----------
 byt_t_ffrd8/byt_t_ffrd8.mk |   20 +++++++++---------
 byt_t_ffrd8/device.mk      |   48 ++++++++++++++++++++++----------------------
 5 files changed, 62 insertions(+), 63 deletions(-)

diff --git a/BoardConfig.mk b/BoardConfig.mk
index 3b2b129..23675f4 100644
--- a/BoardConfig.mk
+++ b/BoardConfig.mk
@@ -1,7 +1,7 @@
 
 include device/intel/common/BoardConfig.mk
 
-#TARGET_ARCH_VARIANT := x86-slm
+TARGET_ARCH_VARIANT := silvermont
 
 ifeq ($(FORCE_FLASHFILE_NO_OTA),true)
   FLASHFILE_NO_OTA := true
@@ -15,8 +15,8 @@ BOARD_HAS_CAPSULE ?= true
 PRODUCT_LIBRARY_PATH := $(PRODUCT_LIBRARY_PATH):/system/lib/egl
 
 # Disable recovery for now
-TARGET_MAKE_NO_DEFAULT_RECOVERY := true
-TARGET_NO_RECOVERY := false
+#TARGET_MAKE_NO_DEFAULT_RECOVERY := true
+#TARGET_NO_RECOVERY := false
 
 ENABLE_GEN_GRAPHICS := true
 
@@ -33,7 +33,7 @@ endif
 ifneq ($(TARGET_NO_RECOVERY),true)
 TARGET_RECOVERY_UI_LIB := libintel_recovery_ui
 TARGET_RECOVERY_PIXEL_FORMAT := "BGRA_8888"
-TARGET_RECOVERY_UPDATER_LIBS += libintel_updater
+#TARGET_RECOVERY_UPDATER_LIBS += libintel_updater
 endif
 
 TARGET_USERIMAGES_SPARSE_EXT_DISABLED := false
@@ -72,7 +72,7 @@ DEFAULT_JIT_CODE_GENERATOR := PCG
 BUILD_WITH_SECURITY_FRAMEWORK := txei
 
 # enable WebRTC
-ENABLE_WEBRTC := true
+ENABLE_WEBRTC := false
 
 INTEL_FEATURE_ARKHAM := false
 ifeq ($(INTEL_FEATURE_ARKHAM),true)
@@ -85,10 +85,10 @@ ro.intel.arkham.enabled=true \
 ro.intel.arkham.maxcontainers=1
 endif
 
-BOARD_SEPOLICY_DIRS :=\
+#BOARD_SEPOLICY_DIRS :=\
 	device/intel/baytrail/sepolicy
 
-BOARD_SEPOLICY_UNION :=\
+#BOARD_SEPOLICY_UNION :=\
 	file_contexts \
 	seapp_contexts \
 	file.te \
diff --git a/baytrail.mk b/baytrail.mk
index 553f54b..d792b15 100644
--- a/baytrail.mk
+++ b/baytrail.mk
@@ -69,7 +69,7 @@ PRODUCT_PACKAGES += \
     charger_res_images
 
 # remote-process for parameter-framework tuning interface
-PRODUCT_PACKAGES_DEBUG += \
+#PRODUCT_PACKAGES_DEBUG += \
     libremote-processor \
     remote-process
 
@@ -77,11 +77,11 @@ PRODUCT_PACKAGES_DEBUG += \
 PRODUCT_PACKAGES_ENG += FPT TXEManuf
 
 # Add HdmiSettings app
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     HdmiSettings
 
 # Ota and Ota Downloader
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     Ota \
     OtaDownloader
 
@@ -90,14 +90,14 @@ PRODUCT_PACKAGES_DEBUG += \
     crash_package
 
 #Opencl
-PRODUCT_PACKAGES += opencl_bundle
+#PRODUCT_PACKAGES += opencl_bundle
 
 # light
 PRODUCT_PACKAGES += \
     lights.$(PRODUCT_DEVICE)
 
 # sensorhub
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     sensorhubd      \
     libsensorhub    \
     psh_bk.bin      \
@@ -105,22 +105,22 @@ PRODUCT_PACKAGES += \
     fwupdate_script.sh
 
 # rfid/pss service
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     rfid_monzaxd
 
 # IPTrak
-PRODUCT_PACKAGES_DEBUG += \
+#PRODUCT_PACKAGES_DEBUG += \
     IPTrak
 
 # WebRTC reference app
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     videoP2P
 
-PRODUCT_PACKAGES_DEBUG += \
+#PRODUCT_PACKAGES_DEBUG += \
     WebRTCDemo
 
 # Identity Protection Technology (IPT)
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     libiha \
     libsepipt \
     EPIDClientConfig.txt \
@@ -230,7 +230,7 @@ PRODUCT_PACKAGES += \
     PAVP_Group_VLV2EPIDPROD_Public_Keys.bin
 
 # Security service
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     com.intel.security.service.sepmanager \
     com.intel.security.service.sepmanager.xml \
     com.intel.security.lib.sepdrmjni \
diff --git a/byt_t_ffrd8/BoardConfig.mk b/byt_t_ffrd8/BoardConfig.mk
index eda8277..94fa4c8 100644
--- a/byt_t_ffrd8/BoardConfig.mk
+++ b/byt_t_ffrd8/BoardConfig.mk
@@ -3,13 +3,13 @@
 REF_DEVICE_NAME ?= $(TARGET_DEVICE)
 REF_PRODUCT_NAME ?= $(TARGET_PRODUCT)
 
-TARGET_USE_DROIDBOOT := true
+TARGET_USE_DROIDBOOT := false
 
 TARGET_OS_SIGNING_METHOD := isu_plat2
 
 # Android Security Framework
 # must be set before include PLATFORM/BoardConfig.mk
-INTEL_FEATURE_ASF := true
+INTEL_FEATURE_ASF := false
 # Supported ASF Version
 PLATFORM_ASF_VERSION := 2
 
@@ -22,10 +22,10 @@ BOARD_IAFW_COMPONENT := brd_baylake
 BOARD_USES_48000_AUDIO_CAPTURE_SAMPLERATE_FOR_WIDI := true
 
 #Modem
-BOARD_HAVE_MODEM := true
+BOARD_HAVE_MODEM := false
 
 BOARD_MODEM_LIST := 7160_flashless
-BOARD_HAVE_ATPROXY := true
+BOARD_HAVE_ATPROXY := false
 
 TARGET_PHONE_HAS_OEM_LIBRARY := true
 
@@ -65,9 +65,9 @@ INTEL_WIDI_BAYTRAIL := true
 POWERHAL_BYT := true
 
 # Audio
-BOARD_USES_ALSA_AUDIO := true
-BOARD_USES_TINY_ALSA_AUDIO := true
-BOARD_USES_AUDIO_HAL_CONFIGURABLE := true
+BOARD_USES_ALSA_AUDIO := false
+BOARD_USES_TINY_ALSA_AUDIO := false
+BOARD_USES_AUDIO_HAL_CONFIGURABLE := false 
 ifneq (,$(filter $(TARGET_BUILD_VARIANT),eng userdebug))
 # Enable ALSA utils for eng and user debug builds
 BOARD_USE_VIBRATOR := false
@@ -88,11 +88,11 @@ USE_INTEL_UFO_DRIVER := true
 # Set USE_CAMERA_STUB to 'true' for Fake Camera builds,
 # 'false' for libcamera builds to use Camera Imaging(CI) supported by intel.
 USE_CAMERA_STUB := false
-USE_CAMERA_HAL2 := true
+USE_CAMERA_HAL2 := false
 
 USE_INTEL_METABUFFER := true
 
-USE_CSS_2_1 := true
+USE_CSS_2_1 := false
 
 # Enabled HW accelerated JPEG encoder using VA API
 USE_INTEL_JPEG := false
@@ -100,7 +100,6 @@ USE_INTEL_JPEGDEC := true
 # DS1 and NXP effects cannot co-exist
 # Enabled NXP Premium Audio Effect Libraries
 USE_INTEL_LVSE := false
-#USE_INTEL_LVSE := true
 
 ifeq ($(BOARD_KERNEL_CMDLINE),)
 DEBUG_KERNEL_CMDLINE := console=ttyS0,115200 console=logk0 earlyprintk=nologger \
@@ -114,7 +113,7 @@ DEBUG_KERNEL_CMDLINE := loglevel=0
 endif
 BOARD_KERNEL_CMDLINE = $(DEBUG_KERNEL_CMDLINE) androidboot.bootmedia=$(BOARD_BOOTMEDIA) \
                         androidboot.hardware=$(TARGET_DEVICE) $(cmdline_extra) vmalloc=172M \
-                        debug_locks=0
+                        debug_locks=0 selinux=0
 endif
 
 # Graphics
diff --git a/byt_t_ffrd8/byt_t_ffrd8.mk b/byt_t_ffrd8/byt_t_ffrd8.mk
index ae97d94..e274234 100644
--- a/byt_t_ffrd8/byt_t_ffrd8.mk
+++ b/byt_t_ffrd8/byt_t_ffrd8.mk
@@ -45,7 +45,7 @@ PRODUCT_COPY_FILES += \
 PRODUCT_COPY_FILES += \
     $(FRAMEWORK_ETC_PATH)/android.hardware.wifi.direct.xml:$(PERMISSIONS_PATH)/android.hardware.wifi.direct.xml
 
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
         wifi_bcm_4334x
 
 # Copy sar manager resources
@@ -58,7 +58,7 @@ PRODUCT_PACKAGES += \
        fg_conf fg_config.bin
 
 #remote submix audio
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
        audio.r_submix.default
 
 # bcu hal
@@ -66,31 +66,31 @@ PRODUCT_PACKAGES += \
     bcu.default
 
 # rapid ril
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     librapid-ril-core \
     librapid-ril-util
 
 # Cell Broadcast
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     CellBroadcastReceiver
 
 # parameter-framework files
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
         libimc-subsystem \
         parameter-framework.audio.byt_t_ffrd8 \
         parameter-framework.vibrator.byt_t_ffrd8
 
 # MAMGR (Modem Audio Manager)
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     libmamgr-xmm
 
 # build the OMX wrapper codecs
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     libstagefright_soft_mp3dec_mdp \
     libstagefright_soft_aacdec_mdp
 
 # NFC
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     nfc_pn544pc
 
 PRODUCT_PROPERTY_OVERRIDES += \
@@ -99,7 +99,7 @@ PRODUCT_PROPERTY_OVERRIDES += \
     ro.nfc.clk=xtal
 
 #SARManager
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     com.intel.internal.telephony.SARManager \
     com.intel.internal.telephony.SARManager.xml
 
@@ -118,7 +118,7 @@ PRODUCT_COPY_FILES += \
     $(DEVICE_CONF_PATH)/cms_device_config.xml:system/etc/cms_device_config.xml
 
 # Add component-testing applications
-PRODUCT_PACKAGES_ENG += mcd-test
+#PRODUCT_PACKAGES_ENG += mcd-test
 
 PRODUCT_PACKAGES_DEBUG += \
     run_test_ipc.sh
diff --git a/byt_t_ffrd8/device.mk b/byt_t_ffrd8/device.mk
index 8344938..fd4903d 100755
--- a/byt_t_ffrd8/device.mk
+++ b/byt_t_ffrd8/device.mk
@@ -95,7 +95,7 @@ PRODUCT_PACKAGES_ENG += ExoPlayerDemo
 PRODUCT_PACKAGES += liboemcrypto
 
 # omx components
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     libwrs_omxil_core_pvwrapped \
     libOMXVideoDecoderAVC \
     libOMXVideoDecoderAVCSecure \
@@ -108,7 +108,7 @@ PRODUCT_PACKAGES += \
     libOMXVideoEncoderAVC
 
 # libmix
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     libmixvbp_mpeg4 \
     libmixvbp_h264 \
     libmixvbp_vc1 \
@@ -119,7 +119,7 @@ PRODUCT_PACKAGES += \
     libjpeg_hw
 
 # libva
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     vainfo \
     pvr_drv_video
 
@@ -131,11 +131,11 @@ PRODUCT_PACKAGES += \
     libsharedbuffer
 
 # video editor
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     libI420colorconvert
 
 # hardware HAL
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     audio_hal_configurable \
     libaudioresample \
     audio.a2dp.default \
@@ -162,7 +162,7 @@ PRODUCT_PROPERTY_OVERRIDES += ro.blankphone_id=1
    audio.hdmi.$(PRODUCT_DEVICE)
 
 #usb dock audio
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     audio.hs_usb.$(PRODUCT_DEVICE)
 
 #widi audio HAL
@@ -170,9 +170,9 @@ PRODUCT_PACKAGES += \
     audio.widi.$(PRODUCT_DEVICE)
 
 #widi
-PRODUCT_PACKAGES += widi
+#PRODUCT_PACKAGES += widi
 
-PRODUCT_PACKAGES_DEBUG += \
+#PRODUCT_PACKAGES_DEBUG += \
     WirelessDisplaySigmaCapiUI \
     com.intel.widi.sigmaapi \
     com.intel.widi.sigmaapi.xml \
@@ -195,16 +195,16 @@ PRODUCT_PACKAGES += \
      com.intel.internal.telephony.OemTelephony.xml
 
 # SimToolkit app
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     Stk
 
 # Modem Trace Server (MTS)
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     mts
 
 # AMTL : Android Modem Traces and Logs
 ifneq (,$(filter $(TARGET_BUILD_VARIANT),eng userdebug))
-    PRODUCT_PACKAGES += \
+  #  PRODUCT_PACKAGES += \
         Amtl \
         libamtl_jni
 
@@ -214,14 +214,14 @@ ifneq (,$(filter $(TARGET_BUILD_VARIANT),eng userdebug))
 endif
 
 # Modem
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     mmgr \
     libmodemupdate \
     nvm_server \
     miu-app \
     modem
 
-PRODUCT_PACKAGES_DEBUG += \
+#PRODUCT_PACKAGES_DEBUG += \
     mmgr-debug
 
 # MMGR CWS Client
@@ -229,7 +229,7 @@ PRODUCT_PACKAGES_DEBUG += \
     CWS_SERVICE_MANAGER
 
 # TelephonyEventsNotifier
-PRODUCT_PACKAGES_DEBUG += \
+#PRODUCT_PACKAGES_DEBUG += \
     TelephonyEventsNotifier
 
 # Set default network type to LTE/GSM/WCDMA (9)
@@ -282,17 +282,17 @@ PRODUCT_PACKAGES += \
     camera.$(PRODUCT_DEVICE)
 
 # IntelCamera Parameters extensions
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     libintelcamera_jni \
     com.intel.camera.extensions \
     com.intel.camera.extensions.xml
 
 # camera sensor tuning parameter
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
         libSh3aParamsimx135
 
 # camera firmware
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
         hdr_v2_fw_css21_2400b0 \
         shisp_2400b0_v21.bin
 
@@ -311,16 +311,16 @@ PRODUCT_COPY_FILES += \
 
 
 # Camera app
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     IntelCamera \
     SocialGallery
 
 # WiDi app
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     WirelessDisplayUtil
 
 # Test Camera is for Test only
-PRODUCT_PACKAGES_ENG += \
+#PRODUCT_PACKAGES_ENG += \
     TestCamera
 
 # Filesystem management tools
@@ -386,11 +386,11 @@ PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
     audio.codec_offload.$(PRODUCT_DEVICE)
 
 # Optional GMS applications
--include vendor/google/PRIVATE/gms/products/gms_optional.mk
+#-include vendor/google/PRIVATE/gms/products/gms_optional.mk
 
 
 # Intel Corp Email certificate
--include vendor/intel/PRIVATE/cert/IntelCorpEmailCert.mk
+#-include vendor/intel/PRIVATE/cert/IntelCorpEmailCert.mk
 
 # Enable ALAC
 #PRODUCT_PACKAGES += \
@@ -400,7 +400,7 @@ PRODUCT_DEFAULT_PROPERTY_OVERRIDES += \
 PRODUCT_PROPERTY_OVERRIDES += persist.tel.hot_swap.support=true
 
 # Intel VPP/FRC
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     VppSettings
 
 #audio firmware
@@ -430,5 +430,5 @@ PRODUCT_COPY_FILES += \
 include $(PLATFORM_PATH)/baytrail.mk
 
 # Prebuilt HAL packages - Vibrator
-PRODUCT_PACKAGES += \
+#PRODUCT_PACKAGES += \
     vibrator.$(TARGET_BOARD_PLATFORM)
-- 
1.7.9.5

